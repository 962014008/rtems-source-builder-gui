## RTEMS Tools Project (http://www.rtems.org/)# Copyright 2013 Mathew Kallada (matkallada [at] gmail.com)# All rights reserved.## Permission to use, copy, modify, and/or distribute this software for any# purpose with or without fee is hereby granted, provided that the above# copyright notice and this permission notice appear in all copies.## THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES# WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF# MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR# ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES# WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN# ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF# OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.#Still a work in progress!import wxfrom wx.lib.buttons import GenBitmapTextButtonimport osimport sysimport subprocessconsolePanel=None #The main console window instanceclass ConsolePanel(wx.Panel):    def Run(self,command):        """Run a command and put its output in the console window"""        process = subprocess.Popen(command, stdout=subprocess.PIPE)        self.WriteText(process.stdout.read())    def WriteText(self,text):        """Write Text to console"""        self.console.AppendText(text+"\n")    def __init__(self,parent,*args,**kw):        wx.Panel.__init__(self,parent,*args,**kw)        sizer=wx.BoxSizer(wx.VERTICAL)                self.console=wx.TextCtrl(self,style=wx.TE_MULTILINE)        self.console.SetEditable(False)        self.console.SetBackgroundColour((53,53,53))        self.console.SetForegroundColour("white")        font = wx.Font(13, wx.DEFAULT, wx.NORMAL, wx.NORMAL, False, "Courier New")        self.console.SetFont(font)        self.WriteText("RTEMS Source Builder Log")        self.WriteText("- - - - - - - - - - - - ")                sizer.Add(self.console,1,wx.EXPAND)        self.SetSizer(sizer)class MainPanel(wx.Panel):    def __init__(self,parent,*args,**kw):        wx.Panel.__init__(self,parent,*args,**kw)        sizer=wx.BoxSizer(wx.VERTICAL)                self.noteBookMain=wx.Notebook(self)        self.noteBookMain.AddPage(wx.Panel(self.noteBookMain), "General")        sizer.Add(self.noteBookMain,1,wx.EXPAND)        self.SetSizer(sizer)        class MainWindow(wx.Frame):    def openFileDialog(self):        print "Opening file.."    def OnSize(self,event):        self.Refresh()    def closeWindow(self,event):        dial = wx.MessageDialog(None, 'You are about to exit this program. The data you entered will not be saved. Would you like to close this application?','Confirm',  wx.YES | wx.NO|wx.ICON_EXCLAMATION)        if dial.ShowModal() == wx.ID_YES:            self.Destroy()        dial.Destroy()    def CreateMenuBar(self):                    self.menubar = wx.MenuBar()        menu = wx.Menu()        m_open = menu.Append(wx.ID_OPEN, "Open File...\tCtrl + O")        menu.AppendSeparator()        m_exit = menu.Append(wx.ID_EXIT, "Exit\tAlt + Q")        self.Bind(wx.EVT_MENU,lambda event: self.openFileDialog(), m_open)        self.Bind(wx.EVT_MENU, self.closeWindow, m_exit)        self.menubar.Append(menu, "&File")                menu = wx.Menu()        m_about = menu.Append(wx.ID_ABOUT, "&Program Help")                info = wx.AboutDialogInfo()         info.SetName('RTEMS Source Builder')        info.SetVersion('1.0')        info.SetDescription('')        info.SetWebSite('')        self.Bind(wx.EVT_MENU, lambda event: wx.AboutBox(info), m_about)        helpMenu=self.menubar.Append(menu, "&Help")        self.SetMenuBar(self.menubar)    def __init__(self,parent):        wx.Frame.__init__(self, parent, title="RTEMS Source Builder", size=(789,570))        self.InitUI()        os.chdir(os.path.join(os.path.abspath(sys.path[0]), "../sb")) #Change current working dir. to the directory where the scripts are        consolePanel.Run("pythonw check.py")    def InitUI(self):        global consolePanel                self.CreateMenuBar()        consolesplitter = wx.SplitterWindow(self)        panel = wx.Panel(consolesplitter)        self.mainPanel = MainPanel(consolesplitter,style=wx.DOUBLE_BORDER)	#Lower Button Box Area#############################        self.buttonsDock = wx.Panel(self)                bmpDone=wx.ArtProvider.GetBitmap(wx.ART_TICK_MARK,wx.ART_BUTTON)        self.btnDone = GenBitmapTextButton(self.buttonsDock,-1,bmpDone ,"Build",size=(200,-1))        bmpCancel=wx.ArtProvider.GetBitmap(wx.ART_CROSS_MARK,wx.ART_BUTTON)        self.btnCancel = GenBitmapTextButton(self.buttonsDock,-1,bmpCancel ,"Exit",size=(200,-1))        self.btnCancel.Bind(wx.EVT_BUTTON,self.closeWindow)                self.btnDone.Disable()        self.btnDone.SetBackgroundColour("WHITE");self.btnCancel.SetBackgroundColour("WHITE")        self.btnDone.Bind(wx.EVT_BUTTON,lambda event: self.doneClick())        vbox = wx.BoxSizer(wx.VERTICAL)        hbox1 = wx.BoxSizer(wx.HORIZONTAL)        hbox2 = wx.BoxSizer(wx.HORIZONTAL)        hbox2.Add(self.btnDone,0,wx.ALL,5)        hbox2.Add(self.btnCancel,0,wx.ALL,5)        vbox.Add(hbox2, proportion=0, flag=wx.CENTER)        self.buttonsDock.SetSizer(vbox)	###############################		        vbox = wx.BoxSizer(wx.VERTICAL)        hbox1 = wx.BoxSizer(wx.HORIZONTAL)        hbox2 = wx.BoxSizer(wx.HORIZONTAL)        vbox.Add(hbox2, proportion=0, flag=wx.CENTER)        headerBox=wx.BoxSizer(wx.HORIZONTAL)        headerVBox=wx.BoxSizer(wx.VERTICAL)        if os.path.isfile("res\header.png"):            bmpLogo = wx.Image("res\header.png", wx.BITMAP_TYPE_ANY).ConvertToBitmap()        else:            bmpLogo=wx.ArtProvider.GetBitmap(wx.ART_INFORMATION,wx.ART_BUTTON)        imgLogo=wx.StaticBitmap(self,-1,bmpLogo)        headerBox.Add(imgLogo)        self.colorFillerPanel=wx.Panel(self)        self.colorFillerPanel.SetBackgroundColour((56, 83, 47))                informationBox=wx.BoxSizer(wx.HORIZONTAL)        hInfoBox=wx.BoxSizer(wx.HORIZONTAL)                self.colorFillerPanel.SetSizer(informationBox)        hInfoBox.Add(self.colorFillerPanel,1,wx.EXPAND)        headerVBox.Add(hInfoBox,1,wx.EXPAND)        headerBox.Add(headerVBox,1,wx.EXPAND)        sizer = wx.BoxSizer(wx.VERTICAL)        sizer.Add(headerBox,0,wx.EXPAND)        sizer.Add(consolesplitter, 1, wx.EXPAND|wx.ALL,10)	sizer.Add(self.buttonsDock, flag=wx.EXPAND)        ### Add Console Log	consolePanel=ConsolePanel(consolesplitter,size=(-1,200))        consolesplitter.SplitHorizontally(self.mainPanel, consolePanel)        consolesplitter.SetMinimumPaneSize(200)        ###        self.SetMinSize((650, 400))        self.SetSizer(sizer)        self.Centre()        self.SetBackgroundColour("WHITE")                self.Show(True)                  self.Bind(wx.EVT_CLOSE,self.closeWindow)        app = wx.App(False)frame = MainWindow(None)app.MainLoop()